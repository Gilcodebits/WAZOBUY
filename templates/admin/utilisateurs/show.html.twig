{% extends 'base.html.twig' %}

{% block title %}Détails de l'utilisateur - Administration{% endblock %}

{% block body %}
<style>
    body {
        background: #f6f8fa !important;
    }
    .fiche-user-container {
        max-width: 430px;
        margin: 40px auto;
        background: #fff;
        border-radius: 2rem;
        box-shadow: 0 8px 32px rgba(60,72,88,0.10);
        padding: 2.5rem 2rem 2rem 2rem;
        display: flex;
        flex-direction: column;
        align-items: center;
        min-height: 600px;
    }
    .fiche-user-avatar {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        background: #e9ecef;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2.5rem;
        font-weight: 700;
        color: #667eea;
        margin-bottom: 1.5rem;
        box-shadow: 0 2px 8px rgba(102,126,234,0.08);
    }
    .fiche-user-nom {
        font-size: 2rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
        color: #222;
        text-align: center;
    }
    .fiche-user-badge {
        font-size: 1.1rem;
        padding: 0.3em 1.2em;
        border-radius: 1.2em;
        font-weight: 500;
        margin-bottom: 1.5rem;
        display: inline-block;
        color: #16b887;
        background: #fff;
        border: 1.5px solid #16b887;
    }
    .fiche-user-badge.inactif {
        color: #888;
        border-color: #ccc;
    }
    .fiche-user-infos {
        width: 100%;
        margin-bottom: 1.5rem;
    }
    .fiche-user-infos li {
        display: flex;
        align-items: center;
        padding: 0.7rem 0;
        border-bottom: 1px solid #f2f2f2;
        font-size: 1.08rem;
        color: #222;
        gap: 0.7em;
    }
    .fiche-user-infos li:last-child {
        border-bottom: none;
    }
    .fiche-user-infos i {
        color: #667eea;
        font-size: 1.15em;
        min-width: 22px;
        text-align: center;
    }
    .fiche-user-actions {
        width: 100%;
        display: flex;
        gap: 1.2rem;
        justify-content: center;
        margin-bottom: 1.5rem;
    }
    .fiche-user-actions .btn {
        font-size: 1.08rem;
        border-radius: 1em;
        padding: 0.7em 1.5em;
        font-weight: 500;
        box-shadow: 0 1px 4px rgba(102,126,234,0.07);
        transition: background 0.2s, color 0.2s;
        width: 140px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 0.3em;
    }
    .fiche-user-stats {
        display: flex;
        gap: 1.2rem;
        justify-content: center;
        margin-top: 0.5rem;
        width: 100%;
    }
    .fiche-user-stat-badge {
        background: #f6f8fa;
        color: #667eea;
        border-radius: 1em;
        padding: 1em 0.5em 0.7em 0.5em;
        font-size: 1.15rem;
        font-weight: 600;
        box-shadow: 0 1px 4px rgba(102,126,234,0.05);
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 120px;
    }
    .fiche-user-stat-badge .stat-label {
        font-size: 0.93em;
        color: #888;
        font-weight: 400;
        margin-top: 0.2em;
    }
    @media (max-width: 600px) {
        .fiche-user-container {
            padding: 1.2rem 0.5rem 1.5rem 0.5rem;
            max-width: 98vw;
        }
        .fiche-user-actions, .fiche-user-stats {
            flex-direction: column;
            gap: 0.7rem;
        }
        .fiche-user-actions .btn, .fiche-user-stat-badge {
            width: 100%;
        }
    }
</style>
<div class="fiche-user-container">
    {% if utilisateur.photoProfil %}
        <img src="{{ utilisateur.photoProfil }}" alt="Photo de profil" class="fiche-user-avatar" style="object-fit: cover;">
    {% else %}
        <div class="fiche-user-avatar">
            {{ utilisateur.prenom ? utilisateur.prenom|first|upper : '?' }}{{ utilisateur.nom ? utilisateur.nom|first|upper : '?' }}
        </div>
    {% endif %}
    <div class="fiche-user-nom">{{ utilisateur.prenom }} {{ utilisateur.nom }}</div>
    {% if utilisateur.estActif %}
        <span class="fiche-user-badge">Actif</span>
    {% else %}
        <span class="fiche-user-badge inactif">Inactif</span>
    {% endif %}
    <ul class="fiche-user-infos list-unstyled">
        <li><i class="fas fa-envelope"></i><a href="mailto:{{ utilisateur.email }}">{{ utilisateur.email }}</a></li>
        <li><i class="fas fa-phone"></i>{{ utilisateur.telephone|default('Non défini') }}</li>
        <li><i class="fas fa-calendar-plus"></i>Date d'inscription : {{ utilisateur.dateCreation ? utilisateur.dateCreation|date('d/m/Y H:i') : 'Non définie' }}</li>
        <li><i class="fas fa-calendar-check"></i>Dernière connexion : {{ utilisateur.derniereConnexion ? utilisateur.derniereConnexion|date('d/m/Y H:i') : 'Jamais' }}</li>
        <li><i class="fas fa-id-badge"></i>ID : {{ utilisateur.id }}</li>
    </ul>
    <div class="fiche-user-actions">
        {% if utilisateur.estActif %}
            <a href="{{ path('app_admin_utilisateur_desactiver', {'id': utilisateur.id}) }}" class="btn btn-outline-primary"><i class="fas fa-user-slash"></i> Désactiver</a>
        {% else %}
            <a href="{{ path('app_admin_utilisateur_activer', {'id': utilisateur.id}) }}" class="btn btn-outline-success"><i class="fas fa-user-check"></i> Activer</a>
        {% endif %}
        <a href="mailto:{{ utilisateur.email }}" class="btn btn-outline-primary"><i class="fas fa-envelope"></i> Contacter</a>
        <a href="{{ path('app_admin_utilisateurs') }}" class="btn btn-outline-secondary"><i class="fas fa-arrow-left"></i> Retour</a>
    </div>
    <div class="fiche-user-stats">
        <div class="fiche-user-stat-badge">
            ?
            <span class="stat-label">Produits</span>
        </div>
        <div class="fiche-user-stat-badge">
            {{ utilisateur.dateCreation ? utilisateur.dateCreation|date('Y') : '?' }}
            <span class="stat-label">Année d'inscription</span>
        </div>
        <div class="fiche-user-stat-badge">
            {{ utilisateur.estActif ? 'Oui' : 'Non' }}
            <span class="stat-label">Compte actif</span>
        </div>
    </div>
</div>
{% endblock %}
